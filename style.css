/* Base */
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #121212;
  color: #e0e0e0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* Header */
header {
  background: #1e1e1e;
  padding: 1rem;
  text-align: center;
  border-bottom: 1px solid #333;
}
header h1 { margin: 0; color: #bb86fc; }
header .subtitle { margin-top: .5rem; color: #a8a8a8; }

/* Messages */
#messages { padding: .5rem 1rem; }
.msg { border-radius: 8px; padding: .6rem .8rem; margin: .25rem 0; font-size: .95rem; }
.msg.info { background: #173042; border: 1px solid #295c76; }
.msg.good { background: #1b2f1b; border: 1px solid #2e6b2e; }
.msg.warn { background: #3a2c10; border: 1px solid #7a5b1a; }
.msg.bad  { background: #3a1f23; border: 1px solid #7a2a33; }

/* ===== Progressive Progress Bar (ENLARGED) ===== */

/* container */
.progress {
  position: relative;
  width: 100%;
  height: 22px;                          /* ↑ taller bar */
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.16); /* slightly stronger border */
  border-radius: 999px;
  overflow: hidden;
  box-shadow:
    inset 0 1px 2px rgba(0,0,0,0.35),
    0 0 10px rgba(138,43,226,0.25);       /* subtle outer glow */
  margin: 10px 0;                         /* breathing room around bar */
}

/* the filling bar */
.progress__bar {
  width: 0%;                               /* animated to 100% */
  height: 100%;
  /* brand gradient base */
  background: linear-gradient(90deg, #8a2be2 0%, #6ee7f9 100%);

  /* subtle moving stripes layered on top for "motion" perception */
  background-image:
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,0.15) 0,
      rgba(255,255,255,0.15) 12px,
      transparent 12px,
      transparent 24px
    ),
    linear-gradient(90deg, #8a2be2, #6ee7f9);
  background-size: 24px 24px, 100% 100%;
  animation: progress-stripes 1.1s linear infinite;

  /* Smoothing */
  transition: width 140ms linear;          /* slightly longer for visible fill */
  will-change: width;
  box-shadow: 0 0 8px rgba(110,231,249,0.25);
}

/* centered % text overlay (ENLARGED) */
.progress__text {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  font-size: 1rem;                         /* ↑ bigger % text */
  font-weight: 700;                        /* bold for clarity */
  color: rgba(255,255,255,0.92);
  text-shadow: 0 1px 2px rgba(0,0,0,0.6);  /* legibility over gradient */
  pointer-events: none;
  user-select: none;
  letter-spacing: .2px;
  font-variant-numeric: tabular-nums;      /* stable width for digits */
}

@keyframes progress-stripes {
  from { background-position: 0 0, 0 0; }
  to   { background-position: 24px 0, 0 0; }
}

/* Accessibility: honor reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .progress__bar {
    animation: none;
    transition: width 0.01s linear;
  }
}

/* Toolbar */
.toolbar {
  display: flex; flex-wrap: wrap; justify-content: center; gap: .75rem;
  padding: 1rem; background: #1e1e1e; border-bottom: 1px solid #333;
}
button {
  background: #6200ea; color: #fff; border: none; border-radius: 6px;
  padding: .7rem 1.2rem; font-size: 1rem; cursor: pointer; transition: background .24s;
}
button:hover { background: #3700b3; }
a#downloadLink, a#excelLink { color: #03dac6; font-weight: 700; text-decoration: none; align-self: center; }
a#downloadLink:hover, a#excelLink:hover { text-decoration: underline; }

/* Field selector */
.field-selector {
  display: flex; flex-wrap: wrap; align-items: center; gap: 1rem;
  padding: .6rem 1rem; background: #1e1e1e; border-bottom: 1px solid #333;
}
.field-selector strong { color: #caa8ff; }

/* Advanced */
.advanced { padding: .75rem 1rem; background: #151515; border-bottom: 1px solid #2a2a2a; }
.advanced__row { display: grid; grid-template-columns: 1fr; gap: 1rem; }
.muted { color: #a8a8a8; font-size: .9rem; }
.tiny { font-size: .8rem; }
.textline {
  width: 100%; box-sizing: border-box; padding: .6rem .7rem; border-radius: 6px;
  border: 1px solid #333; background: #2a2a2a; color: #e0e0e0; margin-bottom: .6rem;
}

/* Editors */
.editor { display: flex; flex: 1; gap: 1rem; padding: 1rem; box-sizing: border-box; }
textarea {
  flex: 1; border: none; border-radius: 8px; background: #2a2a2a; color: #e0e0e0;
  padding: 1rem; font-family: monospace; resize: none; font-size: .95rem;
}
textarea:focus { outline: 2px solid #bb86fc; }
textarea.error { outline: 2px solid #d35c6b; }

/* Preview table */
#csvPreviewSection { background: #1e1e1e; border-top: 1px solid #333; overflow-x: auto; }
#csvPreview table { width: 100%; border-collapse: collapse; margin-top: .5rem; font-size: .9rem; }
#csvPreview th, #csvPreview td { border: 1px solid #333; padding: 6px 10px; text-align: left; }
#csvPreview th { background: #2a2a2a; color: #bb86fc; }

/* Error details */
.error-details {
  margin: .5rem 1rem 1rem; background: #1d1516; border: 1px solid #5a2f35;
  border-radius: 8px; padding: .3rem .7rem; color: #e8c6c9;
}

/* Summary pills */
.summary-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); gap: .5rem; }
.pill {
  display: inline-block; padding: .35rem .6rem; border: 1px solid #333; border-radius: 999px;
  background: #1e1e1e; color: #caa8ff; font-size: .9rem; text-align: center;
}

/* Logo */
.ps-logo-wrap { position: fixed; top: 8px; left: 12px; z-index: 1000; text-decoration: none; }
.ps-logo { height: 100px; width: auto; display: block; object-fit: contain; filter: drop-shadow(0 1px 4px rgba(0,0,0,.25)); }

/* Responsive */
@media (max-width: 900px){
  .editor{flex-direction: column;}
  .progress { height: 20px; }            /* slightly smaller on small screens */
  .progress__text { font-size: .95rem; }
}
